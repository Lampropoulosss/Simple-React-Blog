(this["webpackJsonpfirst-react-blog"]=this["webpackJsonpfirst-react-blog"]||[]).push([[0],{20:function(e,t,c){},30:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(13),s=c.n(a),i=(c(20),c(4)),o=c(3),j=c(5),l=c.n(j),b=c(0),d=function(){return Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)("h1",{children:"Johnny's Blog"}),Object(b.jsxs)("div",{className:"links",children:[Object(b.jsx)(i.b,{to:"/",children:"Home"}),l.a.get("webToken")&&Object(b.jsx)(i.b,{to:"/create",children:"New Blog"}),!l.a.get("webToken")&&Object(b.jsx)(i.b,{to:"/register",children:"Register"}),!l.a.get("webToken")&&Object(b.jsx)(i.b,{to:"/login",children:"Login"}),l.a.get("webToken")&&Object(b.jsx)(i.b,{to:"/logout",children:"Logout"})]})]})},u=function(e){var t=e.blogs,c=e.title;return Object(b.jsxs)("div",{className:"blog-list",children:[Object(b.jsx)("h2",{children:c}),t.map((function(e){return Object(b.jsx)("div",{className:"blog-preview",children:Object(b.jsxs)(i.b,{to:"/blogs/".concat(e.id),children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsxs)("p",{children:["Written by: ",e.author]})]})},e.id)}))]})},h=c(2),O=function(e){var t=Object(n.useState)(null),c=Object(h.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)(!0),i=Object(h.a)(s,2),o=i[0],j=i[1],l=Object(n.useState)(null),b=Object(h.a)(l,2),d=b[0],u=b[1];return Object(n.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("Could not fetch the data for that resource");return e.json()})).then((function(e){a(e),j(!1),u(null)})).catch((function(e){"AbortError"!==e.name&&(j(!1),u(e.message))})),function(){return t.abort()}}),[e]),{data:r,isPending:o,error:d}},x=function(){var e=O("https://lampropoulos.me/api/blogs"),t=e.data,c=e.isPending,n=e.error;return Object(b.jsxs)("div",{className:"home",children:[n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:n})}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Loading..."})}),t&&Object(b.jsx)(u,{blogs:t,title:"All Blogs"})]})},p=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(""),s=Object(h.a)(a,2),i=s[0],j=s[1],l=Object(n.useState)(""),d=Object(h.a)(l,2),u=d[0],O=d[1],x=Object(n.useState)(!1),p=Object(h.a)(x,2),g=p[0],f=p[1],m=Object(o.f)();return Object(b.jsxs)("div",{className:"create",children:[Object(b.jsx)("h2",{children:"Add a New Blog"}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:c})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:i,body:u};f(!0),r(""),fetch("https://lampropoulos.me/api/blogs",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error)return r(e.error),void f(!1);f(!1),m.push("/")}))},children:[Object(b.jsx)("label",{children:"Blog Title:"}),Object(b.jsx)("input",{type:"text",value:i,onChange:function(e){return j(e.target.value)}}),Object(b.jsx)("label",{children:"Blog Body:"}),Object(b.jsx)("textarea",{value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Blog Author:"}),Object(b.jsx)("input",{placeholder:"Your Name",disabled:!0}),!g&&Object(b.jsx)("button",{children:"Add Blog"}),g&&Object(b.jsx)("button",{disabled:!0,children:"Adding blog..."})]})]})},g=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],a=Object(o.g)().id,s=Object(o.f)(),i=O("https://lampropoulos.me/api/blogs/"+a),j=i.data,d=i.isPending,u=i.error;return Object(b.jsxs)("div",{className:"blog-details",children:[d&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Loading..."})}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:c})}),u&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:u})}),j&&Object(b.jsxs)("article",{children:[Object(b.jsx)("h2",{children:j[0].title}),Object(b.jsxs)("p",{className:"written-by",children:["Written by ",j[0].author]}),Object(b.jsx)("div",{children:Object(b.jsx)("pre",{className:"pre",children:j[0].body})}),l.a.get("webToken")&&Object(b.jsx)("button",{onClick:function(){fetch("https://lampropoulos.me/api/blogs/"+j[0].id,{method:"DELETE",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){if(e.error)return r(e.error);s.push("/")}))},children:"Delete"})]})]})},f=function(){return Object(b.jsxs)("div",{className:"not-found",children:[Object(b.jsx)("h2",{children:"404"}),Object(b.jsx)("p",{children:"That page cannot be found"}),Object(b.jsx)(i.b,{to:"/",children:"Back to Home..."})]})},m=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(h.a)(a,2),i=s[0],o=s[1],j=Object(n.useState)(""),d=Object(h.a)(j,2),u=d[0],O=d[1],x=Object(n.useState)(""),p=Object(h.a)(x,2),g=p[0],f=p[1],m=Object(n.useState)(""),v=Object(h.a)(m,2),w=v[0],N=v[1],y=Object(n.useState)(""),A=Object(h.a)(y,2),S=A[0],C=A[1],T=Object(n.useState)(""),k=Object(h.a)(T,2),B=k[0],E=k[1];Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render=6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",e.async=!0,document.body.appendChild(e)}),[]);return Object(b.jsxs)("div",{className:"register",children:[Object(b.jsx)("h2",{children:"Create a New Account"}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:c})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),r(""),window.grecaptcha.ready((function(){window.grecaptcha.execute("6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",{action:"register"}).then((function(e){var t={firstName:u,lastName:g,email:w,password1:S,password2:B};fetch("https://lampropoulos.me/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({user:t,captcha:e})}).then((function(e){return e.json()})).then((function(e){e.error?(r(e.error),o(!1)):(l.a.set("webToken",e.token,{expires:7}),window.location.replace("/"))})).catch((function(){return o(!1)}))}))}))},children:[Object(b.jsx)("label",{children:"First Name:"}),Object(b.jsx)("input",{type:"text",value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Last Name:"}),Object(b.jsx)("input",{type:"text",value:g,onChange:function(e){return f(e.target.value)}}),Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",value:w,onChange:function(e){return N(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",value:S,onChange:function(e){return C(e.target.value)}}),Object(b.jsx)("label",{children:"Re-Enter Your Password:"}),Object(b.jsx)("input",{type:"password",value:B,onChange:function(e){return E(e.target.value)}}),!i&&Object(b.jsx)("button",{"data-action":"register",children:"Register"}),i&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."})]})]})},v=function(){var e=Object(n.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(h.a)(a,2),i=s[0],o=s[1],j=Object(n.useState)(""),d=Object(h.a)(j,2),u=d[0],O=d[1],x=Object(n.useState)(""),p=Object(h.a)(x,2),g=p[0],f=p[1];Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render=6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",e.async=!0,document.body.appendChild(e)}),[]);return Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("h2",{children:"Log in to Your Account"}),c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:c})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o(!0),r(""),window.grecaptcha.ready((function(){window.grecaptcha.execute("6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",{action:"login"}).then((function(e){var t={email:u,password:g};fetch("https://lampropoulos.me/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({user:t,captcha:e})}).then((function(e){return e.json()})).then((function(e){e.error?(r(e.error),o(!1)):(l.a.set("webToken",e.token,{expires:7}),window.location.replace("/"))})).catch((function(){return o(!1)}))}))}))},children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",value:g,onChange:function(e){return f(e.target.value)}}),!i&&Object(b.jsx)("button",{"data-action":"login",children:"Login"}),i&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."})]})]})},w=function(){return l.a.get("webToken")&&l.a.remove("webToken"),window.location.replace("/"),Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Please wait.."})})};var N=function(){return Object(b.jsx)(i.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{}),Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(o.c,{children:[Object(b.jsx)(o.a,{exact:!0,path:"/",children:Object(b.jsx)(x,{})}),Object(b.jsx)(o.a,{path:"/create",children:Object(b.jsx)(p,{})}),Object(b.jsx)(o.a,{path:"/blogs/:id",children:Object(b.jsx)(g,{})}),Object(b.jsx)(o.a,{path:"/register",children:Object(b.jsx)(m,{})}),Object(b.jsx)(o.a,{path:"/login",children:Object(b.jsx)(v,{})}),Object(b.jsx)(o.a,{path:"/logout",children:Object(b.jsx)(w,{})}),Object(b.jsx)(o.a,{path:"*",children:Object(b.jsx)(f,{})})]})})]})})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.9cf656de.chunk.js.map