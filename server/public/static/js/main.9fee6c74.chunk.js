(this["webpackJsonpfirst-react-blog"]=this["webpackJsonpfirst-react-blog"]||[]).push([[0],{21:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(13),s=n.n(a),o=(n(21),n(4)),i=n(3),l=n(5),j=n.n(l),b=n(0),d=function(){return Object(b.jsxs)("nav",{className:"navbar",children:[Object(b.jsx)("h1",{children:"Johnny's Blog"}),Object(b.jsxs)("div",{className:"links",children:[Object(b.jsx)(o.b,{to:"/",children:"Home"}),j.a.get("webToken")&&Object(b.jsx)(o.b,{to:"/create",children:"New Blog"}),!j.a.get("webToken")&&Object(b.jsx)(o.b,{to:"/register",children:"Register"}),!j.a.get("webToken")&&Object(b.jsx)(o.b,{to:"/login",children:"Login"}),j.a.get("webToken")&&Object(b.jsx)(o.b,{to:"/logout",children:"Logout"})]})]})},u=function(e){var t=e.blogs,n=e.title;return Object(b.jsxs)("div",{className:"blog-list",children:[Object(b.jsx)("h2",{children:n}),t.map((function(e){return Object(b.jsx)("div",{className:"blog-preview",children:Object(b.jsxs)(o.b,{to:"/blogs/".concat(e.id),children:[Object(b.jsx)("h2",{children:e.title}),Object(b.jsxs)("p",{children:["Written by: ",e.author]})]})},e.id)}))]})},h=n(2),O=function(e){var t=Object(c.useState)(null),n=Object(h.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(!0),o=Object(h.a)(s,2),i=o[0],l=o[1],j=Object(c.useState)(null),b=Object(h.a)(j,2),d=b[0],u=b[1];return Object(c.useEffect)((function(){var t=new AbortController;return fetch(e,{signal:t.signal}).then((function(e){if(!e.ok)throw Error("Could not fetch the data for that resource");return e.json()})).then((function(e){a(e),l(!1),u(null)})).catch((function(e){"AbortError"!==e.name&&(l(!1),u(e.message))})),function(){return t.abort()}}),[e]),{data:r,isPending:i,error:d}},x=function(){var e=O("https://lampropoulos.me/api/blogs"),t=e.data,n=e.isPending,c=e.error;return Object(b.jsxs)("div",{className:"home",children:[c&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:c})}),n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Loading..."})}),t&&Object(b.jsx)(u,{blogs:t,title:"All Blogs"})]})},p=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(h.a)(a,2),o=s[0],l=s[1],j=Object(c.useState)(""),d=Object(h.a)(j,2),u=d[0],O=d[1],x=Object(c.useState)(!1),p=Object(h.a)(x,2),g=p[0],f=p[1],m=Object(i.f)();return Object(b.jsxs)("div",{className:"create",children:[Object(b.jsx)("h2",{children:"Add a New Blog"}),n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:n})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={title:o,body:u};f(!0),r(""),fetch("https://lampropoulos.me/api/blogs",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error)return r(e.error),void f(!1);f(!1),m.push("/")}))},children:[Object(b.jsx)("label",{children:"Blog Title:"}),Object(b.jsx)("input",{type:"text",value:o,onChange:function(e){return l(e.target.value)}}),Object(b.jsx)("label",{children:"Blog Body:"}),Object(b.jsx)("textarea",{value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Blog Author:"}),Object(b.jsx)("input",{placeholder:"Your Name",disabled:!0}),!g&&Object(b.jsx)("button",{children:"Add Blog"}),g&&Object(b.jsx)("button",{disabled:!0,children:"Adding blog..."})]})]})},g=n(16),f=n.n(g),m=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(i.g)().id,s=Object(i.f)(),o=O("https://lampropoulos.me/api/blogs/"+a),l=o.data,d=o.isPending,u=o.error;return Object(b.jsxs)("div",{className:"blog-details",children:[d&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Loading..."})}),n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:n})}),u&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:u})}),l&&Object(b.jsxs)("article",{children:[Object(b.jsx)("h2",{children:l[0].title}),Object(b.jsxs)("p",{className:"written-by",children:["Written by ",l[0].author]}),Object(b.jsx)("div",{children:Object(b.jsx)("pre",{className:"pre",dangerouslySetInnerHTML:{__html:f.a.sanitize(l[0].body)}})}),j.a.get("webToken")&&Object(b.jsx)("button",{onClick:function(){fetch("https://lampropoulos.me/api/blogs/"+l[0].id,{method:"DELETE",credentials:"same-origin"}).then((function(e){return e.json()})).then((function(e){if(e.error)return r(e.error);s.push("/")}))},children:"Delete"})]})]})},v=function(){return Object(b.jsxs)("div",{className:"not-found",children:[Object(b.jsx)("h2",{children:"404"}),Object(b.jsx)("p",{children:"That page cannot be found"}),Object(b.jsx)(o.b,{to:"/",children:"Back to Home..."})]})},w=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(h.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(""),d=Object(h.a)(l,2),u=d[0],O=d[1],x=Object(c.useState)(""),p=Object(h.a)(x,2),g=p[0],f=p[1],m=Object(c.useState)(""),v=Object(h.a)(m,2),w=v[0],y=v[1],S=Object(c.useState)(""),N=Object(h.a)(S,2),A=N[0],k=N[1],C=Object(c.useState)(""),T=Object(h.a)(C,2),B=T[0],E=T[1];Object(c.useEffect)((function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render=6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",e.async=!0,document.body.appendChild(e)}),[]);return Object(b.jsxs)("div",{className:"register",children:[Object(b.jsx)("h2",{children:"Create a New Account"}),n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:n})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(!0),r(""),window.grecaptcha.ready((function(){window.grecaptcha.execute("6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",{action:"register"}).then((function(e){var t={firstName:u,lastName:g,email:w,password1:A,password2:B};fetch("https://lampropoulos.me/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({user:t,captcha:e})}).then((function(e){return e.json()})).then((function(e){e.error?(r(e.error),i(!1)):(j.a.set("webToken",e.token,{expires:7}),window.location.replace("/"))})).catch((function(){return i(!1)}))}))}))},children:[Object(b.jsx)("label",{children:"First Name:"}),Object(b.jsx)("input",{type:"text",value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Last Name:"}),Object(b.jsx)("input",{type:"text",value:g,onChange:function(e){return f(e.target.value)}}),Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",value:w,onChange:function(e){return y(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",value:A,onChange:function(e){return k(e.target.value)}}),Object(b.jsx)("label",{children:"Re-Enter Your Password:"}),Object(b.jsx)("input",{type:"password",value:B,onChange:function(e){return E(e.target.value)}}),!o&&Object(b.jsx)("button",{"data-action":"register",children:"Register"}),o&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."})]})]})},y=function(){var e=Object(c.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(h.a)(a,2),o=s[0],i=s[1],l=Object(c.useState)(""),d=Object(h.a)(l,2),u=d[0],O=d[1],x=Object(c.useState)(""),p=Object(h.a)(x,2),g=p[0],f=p[1];Object(c.useEffect)((function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js?render=6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",e.async=!0,document.body.appendChild(e)}),[]);return Object(b.jsxs)("div",{className:"login",children:[Object(b.jsx)("h2",{children:"Log in to Your Account"}),n&&Object(b.jsx)("div",{children:Object(b.jsx)("p",{className:"error",children:n})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(!0),r(""),window.grecaptcha.ready((function(){window.grecaptcha.execute("6Ler0HIcAAAAAMh8uvNlxXthHB0oC00r27ocDQn3",{action:"login"}).then((function(e){var t={email:u,password:g};fetch("https://lampropoulos.me/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({user:t,captcha:e})}).then((function(e){return e.json()})).then((function(e){e.error?(r(e.error),i(!1)):(j.a.set("webToken",e.token,{expires:7}),window.location.replace("/"))})).catch((function(){return i(!1)}))}))}))},children:[Object(b.jsx)("label",{children:"Email:"}),Object(b.jsx)("input",{type:"text",value:u,onChange:function(e){return O(e.target.value)}}),Object(b.jsx)("label",{children:"Password:"}),Object(b.jsx)("input",{type:"password",value:g,onChange:function(e){return f(e.target.value)}}),!o&&Object(b.jsx)("button",{"data-action":"login",children:"Login"}),o&&Object(b.jsx)("button",{disabled:!0,children:"Please Wait..."})]})]})},S=function(){return j.a.get("webToken")&&j.a.remove("webToken"),window.location.replace("/"),Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:"Please wait.."})})},N=function(){var e=Object(c.useState)((function(){return localStorage.getItem("theme")})),t=Object(h.a)(e,2),n=t[0],r=t[1],a={position:"fixed",zIndex:100,bottom:"1em",left:"1em",color:"#fff",border:"2px solid ".concat("dark"===n?"#fff":"#000"),padding:"4px",background:"transparent",cursor:"pointer",borderRadius:"5px",width:"30px",height:"30px"};return Object(c.useEffect)((function(){"dark"===n?(document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark-mode"),localStorage.setItem("theme","light"))}),[n]),Object(b.jsx)("button",{style:a,onClick:function(){return r((function(e){return"dark"===e?"light":"dark"}))},children:Object(b.jsx)("svg",{width:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 496",children:Object(b.jsx)("path",{fill:"dark"===n?"#fff":"#000",d:"M8,256C8,393,119,504,256,504S504,393,504,256,393,8,256,8,8,119,8,256ZM256,440V72a184,184,0,0,1,0,368Z",transform:"translate(-8 -8)"})})})};var A=function(){var e=N();return Object(b.jsx)(o.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{}),Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{exact:!0,path:"/",children:Object(b.jsx)(x,{})}),Object(b.jsx)(i.a,{path:"/create",children:Object(b.jsx)(p,{})}),Object(b.jsx)(i.a,{path:"/blogs/:id",children:Object(b.jsx)(m,{})}),Object(b.jsx)(i.a,{path:"/register",children:Object(b.jsx)(w,{})}),Object(b.jsx)(i.a,{path:"/login",children:Object(b.jsx)(y,{})}),Object(b.jsx)(i.a,{path:"/logout",children:Object(b.jsx)(S,{})}),Object(b.jsx)(i.a,{path:"*",children:Object(b.jsx)(v,{})})]})}),e]})})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.9fee6c74.chunk.js.map